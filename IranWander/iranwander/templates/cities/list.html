{% extends "base.html" %}

{% block title %}iranwander{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/cities.css') }}?v=2">
<style>
.search-title {
    text-align: center;
    margin: 2rem 0 3rem;
    color: #636363;
    font-size: 2.2rem;
    font-weight: 700;
}
.search-title strong { color: #23a6a6; }
.no-results {
    text-align: center;
    padding: 4rem 2rem;
    color: #595959;
    font-size: 1.5rem;
}
.back-link {
    color: #23a6a6;
    text-decoration: none;
    font-weight: 600;
    margin-top: 1rem;
    display: inline-block;
}
</style>
{% endblock %}

{% block main_heading %}Iran Cities{% endblock %}

{% block content %}

<div class="hero-search">
    <div class="search-container">
        <div class="search-wrapper">
            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="11" cy="11" r="8" stroke-width="2"/>
                <path d="m21 21-4.35-4.35" stroke-width="2" stroke-linecap="round"/>
            </svg>

            <input
                type="text"
                id="heroSearch"
                placeholder="search anything"
                autocomplete="off"
                spellcheck="false">

            <button type="submit" class="search-btn">
                <span>Search</span>
                <svg class="arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M5 12h14M13 5l7 7-7 7" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>

        <div class="search-suggestions" id="suggestions"></div>
    </div>
</div>

{% if search_query %}
    <div class="search-title">
        result for <strong>"{{ search_query }}"</strong>
        {% if cities|length == 1 %}
            ({{ cities|length }} cities found)
        {% else %}
            ({{ cities|length }} cities found)
        {% endif %}
    </div>
{% else %}
    <h2 class="title">Iran Cities</h2>
{% endif %}

<div class="container">
    {% if cities %}
        {% for city in cities %}
        <div class="card">
            <img decoding="async" loading="lazy" src="{{ url_for('static', filename='img/' + city.image) }}"
                 alt="{{ city.name }}" loading="lazy" decoding="async">

            <div class="info">
                <h3>{{ city.name }}</h3>
                <svg xmlns="http://www.w3.org/2000/svg"
                     fill="none"
                     viewBox="0 0 24 24"
                     stroke-width="1.5"
                     stroke="currentColor"
                     class="like-icon {% if city in current_user.favorites %}liked{% endif %}"
                     data-city-id="{{ city.id }}">
                     <path stroke-linecap="round" stroke-linejoin="round"
                        d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" />
                </svg>
            </div>

            <a href="{{ url_for('city.details_city', id=city.id) }}" class="btn">Show Attractions</a>
        </div>
        {% endfor %}
    {% else %}
        <div class="no-results">
            <p>no city found <strong>{{ search_query }}</strong> !</p>
            <a href="{{ url_for('city.list_cities') }}" class="back-link">Comeback to all cities</a>
        </div>
    {% endif %}
</div>

<div id="overlay" class="overlay hidden"></div>
<div id="modal" class="modal hidden">
    <div id="modal-content" class="modal-content"></div>
</div>

{% endblock %}

{% block extra_js %}
<script defer src="{{ url_for('static', filename='js/cities.js') }}?v=2"></script>
{% endblock %}